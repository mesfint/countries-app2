{"ast":null,"code":"import _regeneratorRuntime from\"/home/mesfin/Desktop/countries-app2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mesfin/Desktop/countries-app2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mesfin/Desktop/countries-app2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams,Link,useLocation}from'react-router-dom';import{BiArrowBack}from'react-icons/bi';import{useEffect,useState}from'react';import axios from'axios';import styles from'./CountryDetail.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CountryDetail(){var _useState=useState({temp:0,pressure:\"\",humidity:\"\",description:\"\",icon:\"\",wind:\"\",visibility:\"\"}),_useState2=_slicedToArray(_useState,2),weather=_useState2[0],setWeather=_useState2[1];var _useParams=useParams(),name=_useParams.name;var _useLocation=useLocation(),state=_useLocation.state;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(state.capital,\"&appid=\").concat(process.env.REACT_APP_WEATHER_API_KEY,\"&units=metric\"));case 2:res=_context.sent;setWeather({temp:res.data.main.temp,pressure:res.data.main.pressure,humidity:res.data.main.humidity,description:res.data.weather[0].description,icon:res.data.weather[0].icon,wind:res.data.wind.speed,visibility:res.data.visibility});//console.log(res.data);\ncase 4:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();var timeoutId=setTimeout(function(){fetchData();},1000);// add a 1-second delay between API calls\nreturn function(){return clearTimeout(timeoutId);};},[]);// Fetch the country data using the name parameter\nif(!state){// handle case where state is undefined\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"container --flex-center --dir-column  --my2 \",children:/*#__PURE__*/_jsx(\"p\",{children:\"Error: No country data found\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.details,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:state.flag,alt:name,className:styles.flag})}),/*#__PURE__*/_jsxs(\"div\",{className:\"country-info --p\",children:[/*#__PURE__*/_jsx(\"p\",{children:state.story}),/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Language:\"}),\" \",state.language]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Capital:\"}),\" \",state.capital]}),state.neighbors&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Neighbours:\"}),\" \",state.neighbors.join(\", \")]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.weather,children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Weather in \",state.capital,\"/\",name]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.weather__info,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.weather__info__temp,children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://openweathermap.org/img/w/\".concat(weather.icon,\".png\"),alt:\"weather icon\"}),/*#__PURE__*/_jsxs(\"p\",{children:[weather.temp,\"\\xB0C\"]})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"--btn --btn-primary --px2 --p2\",children:[/*#__PURE__*/_jsx(BiArrowBack,{}),\"Back to Countries\"]})})]})]})]});}export default CountryDetail;","map":{"version":3,"names":["useParams","Link","useLocation","BiArrowBack","useEffect","useState","axios","styles","jsx","_jsx","jsxs","_jsxs","CountryDetail","_useState","temp","pressure","humidity","description","icon","wind","visibility","_useState2","_slicedToArray","weather","setWeather","_useParams","name","_useLocation","state","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","concat","capital","process","env","REACT_APP_WEATHER_API_KEY","sent","data","main","speed","stop","apply","arguments","timeoutId","setTimeout","clearTimeout","className","children","details","src","flag","alt","story","language","neighbors","join","weather__info","weather__info__temp","to"],"sources":["/home/mesfin/Desktop/countries-app2/src/components/country-details/CountryDetail.js"],"sourcesContent":["import { useParams, Link, useLocation } from 'react-router-dom';\nimport { BiArrowBack } from 'react-icons/bi';\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport styles from './CountryDetail.module.css';\n\nfunction CountryDetail() {\n  const [weather, setWeather] = useState({\n   \n    temp: 0,\n    pressure: \"\",\n    humidity: \"\",\n    description: \"\",\n    icon: \"\",\n    wind: \"\",\n    visibility: \"\",\n  });\n\n    const { name } = useParams();\n    const { state } = useLocation();\n   \n\n useEffect(()=>{\n  const fetchData = async () => {\n    const res = await axios.get(`https://api.openweathermap.org/data/2.5/weather?q=${state.capital}&appid=${process.env.REACT_APP_WEATHER_API_KEY}&units=metric`);\n    setWeather({\n      temp: res.data.main.temp,\n      pressure: res.data.main.pressure,\n      humidity: res.data.main.humidity,\n      description: res.data.weather[0].description,\n      icon: res.data.weather[0].icon,\n      wind: res.data.wind.speed,\n      visibility: res.data.visibility,\n    });\n    //console.log(res.data);\n  };\n  \n  fetchData();\n  \n  const timeoutId = setTimeout(() => {\n    fetchData();\n  }, 1000); // add a 1-second delay between API calls\n  \n  return () => clearTimeout(timeoutId);\n},[]);\n     \n\n\n  // Fetch the country data using the name parameter\n  if (!state) {\n    // handle case where state is undefined\n    return (\n      <div className='container --flex-center --dir-column  --my2 '>\n        <p>Error: No country data found</p>\n        {/* <Link className='btn --btn-primary --px2 --p2' to=\"/\"><BiArrowBack />Back to Countries</Link> */}\n      </div>\n    )\n  }\n\n  return (\n    <div className={styles.details}>\n    <div>\n    <div>\n        <img src={state.flag} alt={name} className={styles.flag} />\n\n    </div>\n       <div className='country-info --p'>\n       <p>{state.story}</p>\n       <h2>{name}</h2>\n      <p><strong>Language:</strong> {state.language}</p>\n      <p><strong>Capital:</strong> {state.capital}</p>\n      {state.neighbors && <p><strong>Neighbours:</strong> {state.neighbors.join(\", \")}</p>}\n      </div>\n     \n\n    </div>\n    <div className={styles.weather}>\n        <h2>Weather in {state.capital}/{name}</h2>\n        <div className={styles.weather__info}>\n          <div className={styles.weather__info__temp}>\n            <img src={`http://openweathermap.org/img/w/${weather.icon}.png`} alt=\"weather icon\" />\n            <p>{weather.temp}Â°C</p>\n\n        </div>\n        <Link to=\"/\">\n        <button className='--btn --btn-primary --px2 --p2'>\n        <BiArrowBack />\n        Back to Countries\n\n      </button>\n\n        </Link>\n        \n       \n      </div>\n\n    </div>\n    </div>\n  );\n}\n\nexport default CountryDetail;"],"mappings":"2XAAA,OAASA,SAAS,CAAEC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CAC/D,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhD,QAAS,CAAAC,aAAaA,CAAA,CAAG,CACvB,IAAAC,SAAA,CAA8BR,QAAQ,CAAC,CAErCS,IAAI,CAAE,CAAC,CACPC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,EAAE,CACRC,UAAU,CAAE,EACd,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAT,SAAA,IATKU,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAWxB,IAAAI,UAAA,CAAiBzB,SAAS,EAAE,CAApB0B,IAAI,CAAAD,UAAA,CAAJC,IAAI,CACZ,IAAAC,YAAA,CAAkBzB,WAAW,EAAE,CAAvB0B,KAAK,CAAAD,YAAA,CAALC,KAAK,CAGhBxB,SAAS,CAAC,UAAI,CACb,GAAM,CAAAyB,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,GAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACE,CAAAlC,KAAK,CAACmC,GAAG,sDAAAC,MAAA,CAAsDd,KAAK,CAACe,OAAO,YAAAD,MAAA,CAAUE,OAAO,CAACC,GAAG,CAACC,yBAAyB,kBAAgB,QAAvJX,GAAG,CAAAG,QAAA,CAAAS,IAAA,CACTvB,UAAU,CAAC,CACTV,IAAI,CAAEqB,GAAG,CAACa,IAAI,CAACC,IAAI,CAACnC,IAAI,CACxBC,QAAQ,CAAEoB,GAAG,CAACa,IAAI,CAACC,IAAI,CAAClC,QAAQ,CAChCC,QAAQ,CAAEmB,GAAG,CAACa,IAAI,CAACC,IAAI,CAACjC,QAAQ,CAChCC,WAAW,CAAEkB,GAAG,CAACa,IAAI,CAACzB,OAAO,CAAC,CAAC,CAAC,CAACN,WAAW,CAC5CC,IAAI,CAAEiB,GAAG,CAACa,IAAI,CAACzB,OAAO,CAAC,CAAC,CAAC,CAACL,IAAI,CAC9BC,IAAI,CAAEgB,GAAG,CAACa,IAAI,CAAC7B,IAAI,CAAC+B,KAAK,CACzB9B,UAAU,CAAEe,GAAG,CAACa,IAAI,CAAC5B,UACvB,CAAC,CAAC,CACF;AAAA,wBAAAkB,QAAA,CAAAa,IAAA,MAAAjB,OAAA,GACD,kBAZK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAsB,KAAA,MAAAC,SAAA,OAYd,CAEDxB,SAAS,EAAE,CAEX,GAAM,CAAAyB,SAAS,CAAGC,UAAU,CAAC,UAAM,CACjC1B,SAAS,EAAE,CACb,CAAC,CAAE,IAAI,CAAC,CAAE;AAEV,MAAO,kBAAM,CAAA2B,YAAY,CAACF,SAAS,CAAC,GACtC,CAAC,CAAC,EAAE,CAAC,CAIH;AACA,GAAI,CAAC1B,KAAK,CAAE,CACV;AACA,mBACEnB,IAAA,QAAKgD,SAAS,CAAC,8CAA8C,CAAAC,QAAA,cAC3DjD,IAAA,MAAAiD,QAAA,CAAG,8BAA4B,EAAI,EAE/B,CAEV,CAEA,mBACE/C,KAAA,QAAK8C,SAAS,CAAElD,MAAM,CAACoD,OAAQ,CAAAD,QAAA,eAC/B/C,KAAA,QAAA+C,QAAA,eACAjD,IAAA,QAAAiD,QAAA,cACIjD,IAAA,QAAKmD,GAAG,CAAEhC,KAAK,CAACiC,IAAK,CAACC,GAAG,CAAEpC,IAAK,CAAC+B,SAAS,CAAElD,MAAM,CAACsD,IAAK,EAAG,EAEzD,cACHlD,KAAA,QAAK8C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eACjCjD,IAAA,MAAAiD,QAAA,CAAI9B,KAAK,CAACmC,KAAK,EAAK,cACpBtD,IAAA,OAAAiD,QAAA,CAAKhC,IAAI,EAAM,cAChBf,KAAA,MAAA+C,QAAA,eAAGjD,IAAA,WAAAiD,QAAA,CAAQ,WAAS,EAAS,IAAC,CAAC9B,KAAK,CAACoC,QAAQ,GAAK,cAClDrD,KAAA,MAAA+C,QAAA,eAAGjD,IAAA,WAAAiD,QAAA,CAAQ,UAAQ,EAAS,IAAC,CAAC9B,KAAK,CAACe,OAAO,GAAK,CAC/Cf,KAAK,CAACqC,SAAS,eAAItD,KAAA,MAAA+C,QAAA,eAAGjD,IAAA,WAAAiD,QAAA,CAAQ,aAAW,EAAS,IAAC,CAAC9B,KAAK,CAACqC,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC,GAAK,GAC9E,GAGF,cACNvD,KAAA,QAAK8C,SAAS,CAAElD,MAAM,CAACgB,OAAQ,CAAAmC,QAAA,eAC3B/C,KAAA,OAAA+C,QAAA,EAAI,aAAW,CAAC9B,KAAK,CAACe,OAAO,CAAC,GAAC,CAACjB,IAAI,GAAM,cAC1Cf,KAAA,QAAK8C,SAAS,CAAElD,MAAM,CAAC4D,aAAc,CAAAT,QAAA,eACnC/C,KAAA,QAAK8C,SAAS,CAAElD,MAAM,CAAC6D,mBAAoB,CAAAV,QAAA,eACzCjD,IAAA,QAAKmD,GAAG,oCAAAlB,MAAA,CAAqCnB,OAAO,CAACL,IAAI,QAAO,CAAC4C,GAAG,CAAC,cAAc,EAAG,cACtFnD,KAAA,MAAA+C,QAAA,EAAInC,OAAO,CAACT,IAAI,CAAC,OAAE,GAAI,GAErB,cACNL,IAAA,CAACR,IAAI,EAACoE,EAAE,CAAC,GAAG,CAAAX,QAAA,cACZ/C,KAAA,WAAQ8C,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAClDjD,IAAA,CAACN,WAAW,IAAG,oBAGjB,GAAS,EAEA,GAGH,GAEF,GACA,CAEV,CAEA,cAAe,CAAAS,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}